<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Module 9 | Task 1</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css"
    integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

    <header>
        <nav class="card-shadow">
            <h1>JS Module 9</h1>
            <div class="flex">
                <a href="index.html" class="mx-2">Task 1</a>
                <button>Fake Store API</button>
            </div>
        </nav>
    </header>

    <section class="fakeStore">
        <div class="container">
        </div>
    </section>

    <footer>
        <p>Made with <i class="fa-solid fa-heart red"></i> by rvutd</p>
    </footer>
    
    <script>

        // Get Categories Available on Fake Store API
        async function getCategories() {
            const response = await fetch('https://fakestoreapi.com/products/categories');
            const data = await response.json();
            console.log('getCategories fucntion =', data);
            return data
        }

        // Get Different Product's form API
        async function getItemByCategory(){
            const categories = await getCategories();
            const dataArr = [];
            let response;
            let data;
            let catlog;

            for (let i = 0; i < categories.length; i++){
                catlog = categories[i]
                response = await fetch(`https://fakestoreapi.com/products/category/${catlog}`);
                data = await response.json();
                dataArr.push(data)
            }

            dataArr.forEach(category => {
                category.forEach(item => {
                    setProducts(item)
                })
            })
        }

        getItemByCategory()

        function setProducts(item){
            const ProductContainer = document.querySelector('.fakeStore div:nth-child(1)');

            // Item Image -
            const img = document.createElement('img');
            img.classList.add('prdtImg');
            img.src = item.image;

            // Item Description -
            const description = document.createElement('description');
            description.classList.add('description');
            description.innerHTML = item.description;

            // Item Category -
            const Itemcategory = document.createElement('Itemcategory');
            Itemcategory.classList.add('Itemcategory');
            Itemcategory.innerHTML = 'Category: ' + item.category;

            // Item Image -
            const price = document.createElement('price');
            price.classList.add('price')
            price.innerHTML = 'Price: ' +'$' + item.price;

            // Class for styling
            const div = document.createElement('div');
            div.classList.add('card', 'grid');

            div.appendChild(img);
            div.appendChild(Itemcategory);
            div.appendChild(price);
            ProductContainer.appendChild(div)
        }
    </script>
</body>
</html>